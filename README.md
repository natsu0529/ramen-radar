# ラーメンレーダー (Ramen Radar)

「Google評価と距離が導く、今のあなたにとっての最善の一杯」

ラーメンレーダーは、Googleマップの評価データにユーザーの現在地からの距離という実用的な要素を組み合わせ、独自のスコアリングで**「いますぐ行くべき、最も満足度の高いラーメン屋」**を導き出すモバイルアプリケーションです。ニッチなラーメン好きのニーズに特化し、高速で直感的な操作性で最良の選択を提供します。

## プロジェクトの目的と提供価値

### 目標
ラーメン好きの間で話題になり、「ラーメン探しの際のとりあえずこれ」という必携ツールとなることを目指します。ニッチなラーメン愛好家をターゲットとし、彼らの日常に欠かせないインフラとなることが目標です。

### 独自の提供価値
既存のレビューサイトや地図アプリのランキングは、店舗の絶対的な評価（場所の良し悪しに関わらず「店の力」）に基づいています。

ラーメンレーダーは、この絶対評価に**「現在地からの実距離」というユーザーの環境要因**を組み込むことで、実用的なランキングを生成します。

評価が高くても遠ければスコアは下がり、近くて評価も高い店が上位に表示されるため、**「今のあなたにとっての最善の選択」**がひと目でわかります。

## 主な機能 (Features)

### 3ジャンルの高速ランキング表示
以下の3つのジャンル別ランキングを、現在地から即座に表示します。

*   オールジャンル (All Genre)
*   家系 (Iekei Style)
*   二郎系 (Jiro Style)

### 独自の総合スコア算出
後述のロジックに基づき、各ジャンルで上位10位までの店舗を10点満点で表示します。

ランキング表示には、スコアと現在地からの距離を併記します。

### ラーメンスポット評価
現在地周辺のラーメン環境のポテンシャルを、上位10店の平均スコアから算出し、S, A, B, C, D の5段階で表示します。ユーザーは現在地が「ラーメンの聖地」に近いのかを直感的に把握できます。

### シンプルなUI/UX
「いますぐ美味しいラーメンを食べたい人」のために、迷うことなく操作できるシンプルなデザインと高速な動作を追求します。

地図とランキングをシームレスに切り替えられる設計により、店舗の位置関係をスムーズに確認できます。

ランキング結果には、（家系、二郎系、味噌系、豚骨系）といった詳細なラーメンのタグを併記し、一覧性を高めます。

### 多言語対応
flutter_gen および gen_l10n を利用し、**多言語化（i18n）**に対応可能な構造で実装を進めます。

## スコアリングロジック

### 総合スコア算出方法
総合スコアは10点満点で算出されます。

`総合スコア=(Googleマップの評価×2)−現在地からの実距離 (km)`

*   Googleマップの評価：0〜5点（最大 5×2=10 点）
*   現在地からの実距離 (km)：有効数字2桁で四捨五入したものを使用。
    *   例: 1.23km → 1.2km
    *   例: 0.89km → 0.89km（1km未満の場合はそのまま）

距離の要素により、評価が多少低くても近所の店が上位に来るチャンスが生まれます。

### ラーメンスポット評価 (5段階)
上位10店の平均スコアに基づき、現在地のラーメンポテンシャルを以下の基準で評価します。

| 評価 | 基準 (平均スコア) | 意味 |
| :--- | :---------------- | :--- |
| S    | 8.50点以上        | ラーメンの聖地。このエリアにいるだけで幸せ。 |
| A    | 7.50点∼8.49点     | 非常に優秀。名店が多く、選択肢が豊富。 |
| B    | 6.50点∼7.49点     | 標準的。良質なラーメン屋が複数見つかる。 |
| C    | 5.50点∼6.49点     | 平均以下。特定の店を目指す必要がある。 |
| D    | 5.49点以下        | ラーメン不毛地帯。 |

Google スプレッドシートにエクスポート

## 技術スタック (Technology Stack)

本プロジェクトは、Flutterの最新のベストプラクティスに基づき、クリーンなアーキテクチャで構築されます。

| カテゴリ     | 使用技術/ライブラリ                               | 目的               |
| :----------- | :------------------------------------------------ | :----------------- |
| フレームワーク | Flutter                                           | モバイルクロスプラットフォーム開発 |
| 状態管理     | Riverpod (flutter_riverpod, hooks_riverpod, riverpod_annotation) | 型安全で宣言的な状態管理、依存解決 |
| ルーティング | AutoRoute                                         | コード生成を利用した宣言的な画面遷移管理 |
| データモデル | Freezed + Json_Serializable                       | 不変・型安全なデータクラス（エンティティ、DTO）の定義 |
| 依存性注入   | GetIt / Riverpod Provider                         | サービス、ユースケース、設定値などのDI |
| コード生成   | build_runner (必須)                               | ボイラープレートコードの自動生成 |
| 多言語化     | gen_l10n (intl)                                   | Flutter標準の多言語化フレームワーク |

Google スプレッドシートにエクスポート

### 使用予定の外部 API
このアプリケーションのコア機能を実現するために、以下の Google Maps Platform API を使用します。

*   Places API: ラーメン屋の検索、評価、詳細情報の取得。
*   Distance Matrix API: 現在地からランキング候補店舗までの正確な距離計算。
*   Geocoding API: 住所情報の取得や座標変換。

## 推奨ディレクトリ構成

本プロジェクトでは、機能単位で整理されたモジュール化を推奨します。

```
lib/
├── features/            # 機能単位のモジュール (例: ranking, search, settings)
│   ├── <feature>/
│   │   ├── presentation/  # UI (画面, Widget, Notifier/Controller)
│   │   ├── domain/        # ビジネスロジック (ユースケース, エンティティ)
│   │   └── data/          # データ層 (リポジトリ, データソース)
├── shared/              # アプリ全体で共有するコンポーネント
│   ├── utils/             # ユーティリティ、ヘルパー
│   ├── theme/             # テーマ、カラー、タイポグラフィ
│   ├── widget/            # 共通 Widget
│   └── di/                # 依存性注入 (DI) 設定
├── router/              # AutoRoute によるルーティング設定
├── gen/                 # flutter_gen によるアセット生成資産
├── app.dart             # MaterialApp.router の構成
└── main.dart            # アプリのエントリーポイント
```

## 開発環境のセットアップ

### APIキーの設定
本アプリの実行には、以下の API キー設定が必須です。

Google Maps Platform API キーを取得し、以下のサービスへのアクセスを有効化してください。

*   Places API
*   Distance Matrix API
*   Geocoding API

プロジェクトのルートに .env ファイルを作成し、キーを設定します（flutter_dotenv などを利用）。

### コード スニペット

```
GOOGLE_MAPS_API_KEY="あなたのAPIキー"
```

### コード生成
データモデルやルーティングの変更後には、以下のコマンドを実行しコードを再生成してください。

```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

### 実行（クイック）

```bash
fvm flutter create . --platforms=android,ios,web
fvm flutter pub get
fvm dart run scripts/inject_maps_keys.dart
fvm flutter run -d <device-id>
```

Google API 実装を使用する場合:

```bash
fvm flutter run --dart-define=USE_GOOGLE_API=true -d <device-id>
```

アイコン/スプラッシュ生成（要: `assets/icons/app_icon.png`）:

```bash
fvm flutter pub run flutter_launcher_icons
fvm flutter pub run flutter_native_splash:create
```

